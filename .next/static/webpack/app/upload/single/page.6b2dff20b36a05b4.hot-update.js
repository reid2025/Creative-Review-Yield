"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/upload/single/page",{

/***/ "(app-pages-browser)/./hooks/useFirebaseDrafts.ts":
/*!************************************!*\
  !*** ./hooks/useFirebaseDrafts.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useFirebaseDrafts: () => (/* binding */ useFirebaseDrafts)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_firebase_draft_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/firebase-draft-service */ \"(app-pages-browser)/./lib/firebase-draft-service.ts\");\n/* harmony import */ var sonner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sonner */ \"(app-pages-browser)/./node_modules/sonner/dist/index.mjs\");\n// React hook for Firebase draft management with real-time updates\n\n\n\nconst useFirebaseDrafts = function() {\n    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n    const { userId = 'anonymous', enableRealTime = true } = options;\n    const [drafts, setDrafts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isOnline, setIsOnline] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(navigator.onLine);\n    const [lastSyncTime, setLastSyncTime] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [trackingStats, setTrackingStats] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        totalDrafts: 0,\n        autoSavedCount: 0,\n        manualSavedCount: 0,\n        aiPopulatedCount: 0\n    });\n    const unsubscribeRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const saveTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // Monitor online status\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useFirebaseDrafts.useEffect\": ()=>{\n            const handleOnline = {\n                \"useFirebaseDrafts.useEffect.handleOnline\": ()=>{\n                    setIsOnline(true);\n                    sonner__WEBPACK_IMPORTED_MODULE_2__.toast.success('Connection restored - syncing data...');\n                    refreshDrafts();\n                }\n            }[\"useFirebaseDrafts.useEffect.handleOnline\"];\n            const handleOffline = {\n                \"useFirebaseDrafts.useEffect.handleOffline\": ()=>{\n                    setIsOnline(false);\n                    sonner__WEBPACK_IMPORTED_MODULE_2__.toast.warning('Connection lost - data will sync when reconnected');\n                }\n            }[\"useFirebaseDrafts.useEffect.handleOffline\"];\n            window.addEventListener('online', handleOnline);\n            window.addEventListener('offline', handleOffline);\n            return ({\n                \"useFirebaseDrafts.useEffect\": ()=>{\n                    window.removeEventListener('online', handleOnline);\n                    window.removeEventListener('offline', handleOffline);\n                }\n            })[\"useFirebaseDrafts.useEffect\"];\n        }\n    }[\"useFirebaseDrafts.useEffect\"], []);\n    // Calculate tracking stats when drafts change\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useFirebaseDrafts.useEffect\": ()=>{\n            const stats = {\n                totalDrafts: drafts.length,\n                autoSavedCount: drafts.filter({\n                    \"useFirebaseDrafts.useEffect\": (d)=>d.autoSaved\n                }[\"useFirebaseDrafts.useEffect\"]).length,\n                manualSavedCount: drafts.filter({\n                    \"useFirebaseDrafts.useEffect\": (d)=>!d.autoSaved\n                }[\"useFirebaseDrafts.useEffect\"]).length,\n                aiPopulatedCount: drafts.filter({\n                    \"useFirebaseDrafts.useEffect\": (d)=>d.aiPopulatedFields && d.aiPopulatedFields.length > 0\n                }[\"useFirebaseDrafts.useEffect\"]).length\n            };\n            setTrackingStats(stats);\n        }\n    }[\"useFirebaseDrafts.useEffect\"], [\n        drafts\n    ]);\n    // Set up real-time listener or fetch drafts\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useFirebaseDrafts.useEffect\": ()=>{\n            const initializeFirebase = {\n                \"useFirebaseDrafts.useEffect.initializeFirebase\": async ()=>{\n                    // Initializing Firebase connection\n                    // Test Firebase connection first\n                    const connectionSuccess = await _lib_firebase_draft_service__WEBPACK_IMPORTED_MODULE_1__.FirebaseDraftService.testConnection();\n                    if (!connectionSuccess) {\n                        setError('Firebase connection failed');\n                        setIsLoading(false);\n                        return;\n                    }\n                    if (enableRealTime && isOnline) {\n                        // Setting up real-time drafts listener\n                        const unsubscribe = _lib_firebase_draft_service__WEBPACK_IMPORTED_MODULE_1__.FirebaseDraftService.onDraftsChange(userId, {\n                            \"useFirebaseDrafts.useEffect.initializeFirebase.unsubscribe\": (updatedDrafts)=>{\n                                // Real-time update received\n                                setDrafts(updatedDrafts);\n                                setLastSyncTime(new Date());\n                                setIsLoading(false);\n                                setError(null);\n                            }\n                        }[\"useFirebaseDrafts.useEffect.initializeFirebase.unsubscribe\"]);\n                        unsubscribeRef.current = unsubscribe;\n                        return ({\n                            \"useFirebaseDrafts.useEffect.initializeFirebase\": ()=>{\n                                // Cleaning up real-time drafts listener\n                                unsubscribe();\n                            }\n                        })[\"useFirebaseDrafts.useEffect.initializeFirebase\"];\n                    } else {\n                        // Fallback to manual fetch\n                        refreshDrafts();\n                    }\n                }\n            }[\"useFirebaseDrafts.useEffect.initializeFirebase\"];\n            initializeFirebase();\n        }\n    }[\"useFirebaseDrafts.useEffect\"], [\n        userId,\n        enableRealTime,\n        isOnline\n    ]);\n    // Cleanup on unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useFirebaseDrafts.useEffect\": ()=>{\n            return ({\n                \"useFirebaseDrafts.useEffect\": ()=>{\n                    if (unsubscribeRef.current) {\n                        unsubscribeRef.current();\n                    }\n                    if (saveTimeoutRef.current) {\n                        clearTimeout(saveTimeoutRef.current);\n                    }\n                }\n            })[\"useFirebaseDrafts.useEffect\"];\n        }\n    }[\"useFirebaseDrafts.useEffect\"], []);\n    const refreshDrafts = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useFirebaseDrafts.useCallback[refreshDrafts]\": async ()=>{\n            if (!isOnline) {\n                setError('Cannot refresh drafts - you are offline');\n                return;\n            }\n            try {\n                setIsLoading(true);\n                setError(null);\n                const updatedDrafts = await _lib_firebase_draft_service__WEBPACK_IMPORTED_MODULE_1__.FirebaseDraftService.getAllDrafts(userId);\n                setDrafts(updatedDrafts);\n                setLastSyncTime(new Date());\n            // Manual refresh completed\n            } catch (err) {\n                const errorMessage = err instanceof Error ? err.message : 'Failed to load drafts';\n                setError(errorMessage);\n                console.error('Failed to refresh drafts:', err);\n            } finally{\n                setIsLoading(false);\n            }\n        }\n    }[\"useFirebaseDrafts.useCallback[refreshDrafts]\"], [\n        userId,\n        isOnline\n    ]);\n    const saveDraft = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useFirebaseDrafts.useCallback[saveDraft]\": async (data, imageFile)=>{\n            if (!isOnline) {\n                // Cannot save draft - offline\n                sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error('Cannot save draft - you are offline');\n                return null;\n            }\n            try {\n                // Starting save draft process\n                // Add user ID to draft data\n                const draftData = {\n                    ...data,\n                    userId\n                };\n                const draftId = await _lib_firebase_draft_service__WEBPACK_IMPORTED_MODULE_1__.FirebaseDraftService.saveDraft(draftData, imageFile);\n                // Draft saved successfully\n                // Show success toast\n                const isUpdate = Boolean(data.id);\n                sonner__WEBPACK_IMPORTED_MODULE_2__.toast.success(isUpdate ? 'Draft updated successfully' : 'Draft saved successfully');\n                return draftId;\n            } catch (err) {\n                const errorMessage = err instanceof Error ? err.message : 'Failed to save draft';\n                console.error('âŒ Hook: Save draft failed:', err);\n                setError(errorMessage);\n                sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error(\"Failed to save draft: \".concat(errorMessage));\n                return null;\n            }\n        }\n    }[\"useFirebaseDrafts.useCallback[saveDraft]\"], [\n        userId,\n        isOnline\n    ]);\n    const deleteDraft = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useFirebaseDrafts.useCallback[deleteDraft]\": async (id)=>{\n            if (!isOnline) {\n                sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error('Cannot delete draft - you are offline');\n                return false;\n            }\n            try {\n                // Deleting draft\n                const success = await _lib_firebase_draft_service__WEBPACK_IMPORTED_MODULE_1__.FirebaseDraftService.deleteDraft(id);\n                if (success) {\n                    // Draft deleted successfully\n                    sonner__WEBPACK_IMPORTED_MODULE_2__.toast.success('Draft deleted successfully');\n                    return true;\n                } else {\n                    sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error('Failed to delete draft');\n                    return false;\n                }\n            } catch (err) {\n                const errorMessage = err instanceof Error ? err.message : 'Failed to delete draft';\n                setError(errorMessage);\n                sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error(\"Failed to delete draft: \".concat(errorMessage));\n                console.error('Failed to delete draft:', err);\n                return false;\n            }\n        }\n    }[\"useFirebaseDrafts.useCallback[deleteDraft]\"], [\n        isOnline\n    ]);\n    const getDraft = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useFirebaseDrafts.useCallback[getDraft]\": async (id)=>{\n            if (!isOnline) {\n                sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error('Cannot load draft - you are offline');\n                return null;\n            }\n            try {\n                // Loading draft\n                const draft = await _lib_firebase_draft_service__WEBPACK_IMPORTED_MODULE_1__.FirebaseDraftService.getDraft(id);\n                if (draft) {\n                // Draft loaded successfully\n                } else {\n                // Draft not found\n                }\n                return draft;\n            } catch (err) {\n                const errorMessage = err instanceof Error ? err.message : 'Failed to load draft';\n                setError(errorMessage);\n                sonner__WEBPACK_IMPORTED_MODULE_2__.toast.error(\"Failed to load draft: \".concat(errorMessage));\n                console.error('Failed to load draft:', err);\n                return null;\n            }\n        }\n    }[\"useFirebaseDrafts.useCallback[getDraft]\"], [\n        isOnline\n    ]);\n    // Auto-save functionality with debounce\n    const autoSave = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useFirebaseDrafts.useCallback[autoSave]\": (data, imageFile)=>{\n            if (saveTimeoutRef.current) {\n                clearTimeout(saveTimeoutRef.current);\n            }\n            saveTimeoutRef.current = setTimeout({\n                \"useFirebaseDrafts.useCallback[autoSave]\": async ()=>{\n                    // Auto-save triggered\n                    await saveDraft({\n                        ...data,\n                        autoSaved: true\n                    }, imageFile);\n                }\n            }[\"useFirebaseDrafts.useCallback[autoSave]\"], 2000) // 2 second debounce\n            ;\n        }\n    }[\"useFirebaseDrafts.useCallback[autoSave]\"], [\n        saveDraft\n    ]);\n    return {\n        drafts,\n        isLoading,\n        error,\n        saveDraft,\n        deleteDraft,\n        getDraft,\n        refreshDrafts,\n        trackingStats,\n        isOnline,\n        lastSyncTime\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL3VzZUZpcmViYXNlRHJhZnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsa0VBQWtFO0FBQ0Y7QUFDc0I7QUFDeEQ7QUF5QnZCLE1BQU1NLG9CQUFvQjtRQUFDQywyRUFBb0MsQ0FBQztJQUNyRSxNQUFNLEVBQUVDLFNBQVMsV0FBVyxFQUFFQyxpQkFBaUIsSUFBSSxFQUFFLEdBQUdGO0lBRXhELE1BQU0sQ0FBQ0csUUFBUUMsVUFBVSxHQUFHWCwrQ0FBUUEsQ0FBc0IsRUFBRTtJQUM1RCxNQUFNLENBQUNZLFdBQVdDLGFBQWEsR0FBR2IsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDYyxPQUFPQyxTQUFTLEdBQUdmLCtDQUFRQSxDQUFnQjtJQUNsRCxNQUFNLENBQUNnQixVQUFVQyxZQUFZLEdBQUdqQiwrQ0FBUUEsQ0FBQ2tCLFVBQVVDLE1BQU07SUFDekQsTUFBTSxDQUFDQyxjQUFjQyxnQkFBZ0IsR0FBR3JCLCtDQUFRQSxDQUFjO0lBQzlELE1BQU0sQ0FBQ3NCLGVBQWVDLGlCQUFpQixHQUFHdkIsK0NBQVFBLENBQUM7UUFDakR3QixhQUFhO1FBQ2JDLGdCQUFnQjtRQUNoQkMsa0JBQWtCO1FBQ2xCQyxrQkFBa0I7SUFDcEI7SUFFQSxNQUFNQyxpQkFBaUJ6Qiw2Q0FBTUEsQ0FBc0I7SUFDbkQsTUFBTTBCLGlCQUFpQjFCLDZDQUFNQSxDQUF3QjtJQUVyRCx3QkFBd0I7SUFDeEJGLGdEQUFTQTt1Q0FBQztZQUNSLE1BQU02Qjs0REFBZTtvQkFDbkJiLFlBQVk7b0JBQ1paLHlDQUFLQSxDQUFDMEIsT0FBTyxDQUFDO29CQUNkQztnQkFDRjs7WUFFQSxNQUFNQzs2REFBZ0I7b0JBQ3BCaEIsWUFBWTtvQkFDWloseUNBQUtBLENBQUM2QixPQUFPLENBQUM7Z0JBQ2hCOztZQUVBQyxPQUFPQyxnQkFBZ0IsQ0FBQyxVQUFVTjtZQUNsQ0ssT0FBT0MsZ0JBQWdCLENBQUMsV0FBV0g7WUFFbkM7K0NBQU87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LE1BQU1vRCxXQUFXbEUsa0RBQVdBO21EQUFDLE9BQU9nRTtZQUNsQyxJQUFJLENBQUNsRCxVQUFVO2dCQUNiWCx5Q0FBS0EsQ0FBQ1MsS0FBSyxDQUFDO2dCQUNaLE9BQU87WUFDVDtZQUVBLElBQUk7Z0JBQ0YsZ0JBQWdCO2dCQUVoQixNQUFNdUQsUUFBUSxNQUFNakUsNkVBQW9CQSxDQUFDZ0UsUUFBUSxDQUFDRjtnQkFFbEQsSUFBSUcsT0FBTztnQkFDVCw0QkFBNEI7Z0JBQzlCLE9BQU87Z0JBQ0wsa0JBQWtCO2dCQUNwQjtnQkFFQSxPQUFPQTtZQUNULEVBQUUsT0FBT2YsS0FBSztnQkFDWixNQUFNQyxlQUFlRCxlQUFlRSxRQUFRRixJQUFJRyxPQUFPLEdBQUc7Z0JBQzFEMUMsU0FBU3dDO2dCQUNUbEQseUNBQUtBLENBQUNTLEtBQUssQ0FBQyx5QkFBc0MsT0FBYnlDO2dCQUNyQ0csUUFBUTVDLEtBQUssQ0FBQyx5QkFBeUJ3QztnQkFDdkMsT0FBTztZQUNUO1FBQ0Y7a0RBQUc7UUFBQ3RDO0tBQVM7SUFFYix3Q0FBd0M7SUFDeEMsTUFBTXNELFdBQVdwRSxrREFBV0E7bURBQUMsQ0FBQzBELE1BQWtDQztZQUM5RCxJQUFJaEMsZUFBZXNCLE9BQU8sRUFBRTtnQkFDMUJDLGFBQWF2QixlQUFlc0IsT0FBTztZQUNyQztZQUVBdEIsZUFBZXNCLE9BQU8sR0FBR29COzJEQUFXO29CQUNsQyxzQkFBc0I7b0JBQ3RCLE1BQU1aLFVBQVU7d0JBQUUsR0FBR0MsSUFBSTt3QkFBRWxCLFdBQVc7b0JBQUssR0FBR21CO2dCQUNoRDswREFBRyxNQUFNLG9CQUFvQjs7UUFDL0I7a0RBQUc7UUFBQ0Y7S0FBVTtJQUVkLE9BQU87UUFDTGpEO1FBQ0FFO1FBQ0FFO1FBQ0E2QztRQUNBUTtRQUNBQztRQUNBcEM7UUFDQVY7UUFDQU47UUFDQUk7SUFDRjtBQUNGLEVBQUMiLCJzb3VyY2VzIjpbIkQ6XFxJc3RpYW4gRmlsZXNcXFRpc2VnXFxDUlkgQXBwXFxob29rc1xcdXNlRmlyZWJhc2VEcmFmdHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUmVhY3QgaG9vayBmb3IgRmlyZWJhc2UgZHJhZnQgbWFuYWdlbWVudCB3aXRoIHJlYWwtdGltZSB1cGRhdGVzXHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IHsgRmlyZWJhc2VEcmFmdFNlcnZpY2UsIEZpcmViYXNlRHJhZnREYXRhIH0gZnJvbSAnQC9saWIvZmlyZWJhc2UtZHJhZnQtc2VydmljZSdcclxuaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdzb25uZXInXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFVzZUZpcmViYXNlRHJhZnRzT3B0aW9ucyB7XHJcbiAgdXNlcklkPzogc3RyaW5nXHJcbiAgZW5hYmxlUmVhbFRpbWU/OiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVXNlRmlyZWJhc2VEcmFmdHNSZXR1cm4ge1xyXG4gIGRyYWZ0czogRmlyZWJhc2VEcmFmdERhdGFbXVxyXG4gIGlzTG9hZGluZzogYm9vbGVhblxyXG4gIGVycm9yOiBzdHJpbmcgfCBudWxsXHJcbiAgc2F2ZURyYWZ0OiAoZGF0YTogUGFydGlhbDxGaXJlYmFzZURyYWZ0RGF0YT4sIGltYWdlRmlsZT86IEZpbGUpID0+IFByb21pc2U8c3RyaW5nIHwgbnVsbD5cclxuICBkZWxldGVEcmFmdDogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8Ym9vbGVhbj5cclxuICBnZXREcmFmdDogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8RmlyZWJhc2VEcmFmdERhdGEgfCBudWxsPlxyXG4gIHJlZnJlc2hEcmFmdHM6ICgpID0+IFByb21pc2U8dm9pZD5cclxuICB0cmFja2luZ1N0YXRzOiB7XHJcbiAgICB0b3RhbERyYWZ0czogbnVtYmVyXHJcbiAgICBhdXRvU2F2ZWRDb3VudDogbnVtYmVyXHJcbiAgICBtYW51YWxTYXZlZENvdW50OiBudW1iZXJcclxuICAgIGFpUG9wdWxhdGVkQ291bnQ6IG51bWJlclxyXG4gIH1cclxuICBpc09ubGluZTogYm9vbGVhblxyXG4gIGxhc3RTeW5jVGltZTogRGF0ZSB8IG51bGxcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHVzZUZpcmViYXNlRHJhZnRzID0gKG9wdGlvbnM6IFVzZUZpcmViYXNlRHJhZnRzT3B0aW9ucyA9IHt9KTogVXNlRmlyZWJhc2VEcmFmdHNSZXR1cm4gPT4ge1xyXG4gIGNvbnN0IHsgdXNlcklkID0gJ2Fub255bW91cycsIGVuYWJsZVJlYWxUaW1lID0gdHJ1ZSB9ID0gb3B0aW9uc1xyXG4gIFxyXG4gIGNvbnN0IFtkcmFmdHMsIHNldERyYWZ0c10gPSB1c2VTdGF0ZTxGaXJlYmFzZURyYWZ0RGF0YVtdPihbXSlcclxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSlcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpXHJcbiAgY29uc3QgW2lzT25saW5lLCBzZXRJc09ubGluZV0gPSB1c2VTdGF0ZShuYXZpZ2F0b3Iub25MaW5lKVxyXG4gIGNvbnN0IFtsYXN0U3luY1RpbWUsIHNldExhc3RTeW5jVGltZV0gPSB1c2VTdGF0ZTxEYXRlIHwgbnVsbD4obnVsbClcclxuICBjb25zdCBbdHJhY2tpbmdTdGF0cywgc2V0VHJhY2tpbmdTdGF0c10gPSB1c2VTdGF0ZSh7XHJcbiAgICB0b3RhbERyYWZ0czogMCxcclxuICAgIGF1dG9TYXZlZENvdW50OiAwLFxyXG4gICAgbWFudWFsU2F2ZWRDb3VudDogMCxcclxuICAgIGFpUG9wdWxhdGVkQ291bnQ6IDBcclxuICB9KVxyXG4gIFxyXG4gIGNvbnN0IHVuc3Vic2NyaWJlUmVmID0gdXNlUmVmPCgoKSA9PiB2b2lkKSB8IG51bGw+KG51bGwpXHJcbiAgY29uc3Qgc2F2ZVRpbWVvdXRSZWYgPSB1c2VSZWY8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKVxyXG5cclxuICAvLyBNb25pdG9yIG9ubGluZSBzdGF0dXNcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgaGFuZGxlT25saW5lID0gKCkgPT4ge1xyXG4gICAgICBzZXRJc09ubGluZSh0cnVlKVxyXG4gICAgICB0b2FzdC5zdWNjZXNzKCdDb25uZWN0aW9uIHJlc3RvcmVkIC0gc3luY2luZyBkYXRhLi4uJylcclxuICAgICAgcmVmcmVzaERyYWZ0cygpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGhhbmRsZU9mZmxpbmUgPSAoKSA9PiB7XHJcbiAgICAgIHNldElzT25saW5lKGZhbHNlKVxyXG4gICAgICB0b2FzdC53YXJuaW5nKCdDb25uZWN0aW9uIGxvc3QgLSBkYXRhIHdpbGwgc3luYyB3aGVuIHJlY29ubmVjdGVkJylcclxuICAgIH1cclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb25saW5lJywgaGFuZGxlT25saW5lKVxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCBoYW5kbGVPZmZsaW5lKVxyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdvbmxpbmUnLCBoYW5kbGVPbmxpbmUpXHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgaGFuZGxlT2ZmbGluZSlcclxuICAgIH1cclxuICB9LCBbXSlcclxuXHJcbiAgLy8gQ2FsY3VsYXRlIHRyYWNraW5nIHN0YXRzIHdoZW4gZHJhZnRzIGNoYW5nZVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBzdGF0cyA9IHtcclxuICAgICAgdG90YWxEcmFmdHM6IGRyYWZ0cy5sZW5ndGgsXHJcbiAgICAgIGF1dG9TYXZlZENvdW50OiBkcmFmdHMuZmlsdGVyKGQgPT4gZC5hdXRvU2F2ZWQpLmxlbmd0aCxcclxuICAgICAgbWFudWFsU2F2ZWRDb3VudDogZHJhZnRzLmZpbHRlcihkID0+ICFkLmF1dG9TYXZlZCkubGVuZ3RoLFxyXG4gICAgICBhaVBvcHVsYXRlZENvdW50OiBkcmFmdHMuZmlsdGVyKGQgPT4gZC5haVBvcHVsYXRlZEZpZWxkcyAmJiBkLmFpUG9wdWxhdGVkRmllbGRzLmxlbmd0aCA+IDApLmxlbmd0aFxyXG4gICAgfVxyXG4gICAgc2V0VHJhY2tpbmdTdGF0cyhzdGF0cylcclxuICB9LCBbZHJhZnRzXSlcclxuXHJcbiAgLy8gU2V0IHVwIHJlYWwtdGltZSBsaXN0ZW5lciBvciBmZXRjaCBkcmFmdHNcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgaW5pdGlhbGl6ZUZpcmViYXNlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBJbml0aWFsaXppbmcgRmlyZWJhc2UgY29ubmVjdGlvblxyXG4gICAgICBcclxuICAgICAgLy8gVGVzdCBGaXJlYmFzZSBjb25uZWN0aW9uIGZpcnN0XHJcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb25TdWNjZXNzID0gYXdhaXQgRmlyZWJhc2VEcmFmdFNlcnZpY2UudGVzdENvbm5lY3Rpb24oKVxyXG4gICAgICBpZiAoIWNvbm5lY3Rpb25TdWNjZXNzKSB7XHJcbiAgICAgICAgc2V0RXJyb3IoJ0ZpcmViYXNlIGNvbm5lY3Rpb24gZmFpbGVkJylcclxuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChlbmFibGVSZWFsVGltZSAmJiBpc09ubGluZSkge1xyXG4gICAgICAgIC8vIFNldHRpbmcgdXAgcmVhbC10aW1lIGRyYWZ0cyBsaXN0ZW5lclxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gRmlyZWJhc2VEcmFmdFNlcnZpY2Uub25EcmFmdHNDaGFuZ2UodXNlcklkLCAodXBkYXRlZERyYWZ0cykgPT4ge1xyXG4gICAgICAgICAgLy8gUmVhbC10aW1lIHVwZGF0ZSByZWNlaXZlZFxyXG4gICAgICAgICAgc2V0RHJhZnRzKHVwZGF0ZWREcmFmdHMpXHJcbiAgICAgICAgICBzZXRMYXN0U3luY1RpbWUobmV3IERhdGUoKSlcclxuICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSlcclxuICAgICAgICAgIHNldEVycm9yKG51bGwpXHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICB1bnN1YnNjcmliZVJlZi5jdXJyZW50ID0gdW5zdWJzY3JpYmVcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgLy8gQ2xlYW5pbmcgdXAgcmVhbC10aW1lIGRyYWZ0cyBsaXN0ZW5lclxyXG4gICAgICAgICAgdW5zdWJzY3JpYmUoKVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBGYWxsYmFjayB0byBtYW51YWwgZmV0Y2hcclxuICAgICAgICByZWZyZXNoRHJhZnRzKClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVGaXJlYmFzZSgpXHJcbiAgfSwgW3VzZXJJZCwgZW5hYmxlUmVhbFRpbWUsIGlzT25saW5lXSlcclxuXHJcbiAgLy8gQ2xlYW51cCBvbiB1bm1vdW50XHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGlmICh1bnN1YnNjcmliZVJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgdW5zdWJzY3JpYmVSZWYuY3VycmVudCgpXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNhdmVUaW1lb3V0UmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQoc2F2ZVRpbWVvdXRSZWYuY3VycmVudClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIFtdKVxyXG5cclxuICBjb25zdCByZWZyZXNoRHJhZnRzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCFpc09ubGluZSkge1xyXG4gICAgICBzZXRFcnJvcignQ2Fubm90IHJlZnJlc2ggZHJhZnRzIC0geW91IGFyZSBvZmZsaW5lJylcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpXHJcbiAgICAgIHNldEVycm9yKG51bGwpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB1cGRhdGVkRHJhZnRzID0gYXdhaXQgRmlyZWJhc2VEcmFmdFNlcnZpY2UuZ2V0QWxsRHJhZnRzKHVzZXJJZClcclxuICAgICAgc2V0RHJhZnRzKHVwZGF0ZWREcmFmdHMpXHJcbiAgICAgIHNldExhc3RTeW5jVGltZShuZXcgRGF0ZSgpKVxyXG4gICAgICBcclxuICAgICAgLy8gTWFudWFsIHJlZnJlc2ggY29tcGxldGVkXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBkcmFmdHMnXHJcbiAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSlcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHJlZnJlc2ggZHJhZnRzOicsIGVycilcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSlcclxuICAgIH1cclxuICB9LCBbdXNlcklkLCBpc09ubGluZV0pXHJcblxyXG4gIGNvbnN0IHNhdmVEcmFmdCA9IHVzZUNhbGxiYWNrKGFzeW5jIChcclxuICAgIGRhdGE6IFBhcnRpYWw8RmlyZWJhc2VEcmFmdERhdGE+LCBcclxuICAgIGltYWdlRmlsZT86IEZpbGVcclxuICApOiBQcm9taXNlPHN0cmluZyB8IG51bGw+ID0+IHtcclxuICAgIGlmICghaXNPbmxpbmUpIHtcclxuICAgICAgLy8gQ2Fubm90IHNhdmUgZHJhZnQgLSBvZmZsaW5lXHJcbiAgICAgIHRvYXN0LmVycm9yKCdDYW5ub3Qgc2F2ZSBkcmFmdCAtIHlvdSBhcmUgb2ZmbGluZScpXHJcbiAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gU3RhcnRpbmcgc2F2ZSBkcmFmdCBwcm9jZXNzXHJcbiAgICAgIFxyXG4gICAgICAvLyBBZGQgdXNlciBJRCB0byBkcmFmdCBkYXRhXHJcbiAgICAgIGNvbnN0IGRyYWZ0RGF0YSA9IHsgLi4uZGF0YSwgdXNlcklkIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGRyYWZ0SWQgPSBhd2FpdCBGaXJlYmFzZURyYWZ0U2VydmljZS5zYXZlRHJhZnQoZHJhZnREYXRhLCBpbWFnZUZpbGUpXHJcbiAgICAgIFxyXG4gICAgICAvLyBEcmFmdCBzYXZlZCBzdWNjZXNzZnVsbHlcclxuICAgICAgXHJcbiAgICAgIC8vIFNob3cgc3VjY2VzcyB0b2FzdFxyXG4gICAgICBjb25zdCBpc1VwZGF0ZSA9IEJvb2xlYW4oZGF0YS5pZClcclxuICAgICAgdG9hc3Quc3VjY2Vzcyhpc1VwZGF0ZSA/ICdEcmFmdCB1cGRhdGVkIHN1Y2Nlc3NmdWxseScgOiAnRHJhZnQgc2F2ZWQgc3VjY2Vzc2Z1bGx5JylcclxuICAgICAgXHJcbiAgICAgIHJldHVybiBkcmFmdElkXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2F2ZSBkcmFmdCdcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIEhvb2s6IFNhdmUgZHJhZnQgZmFpbGVkOicsIGVycilcclxuICAgICAgc2V0RXJyb3IoZXJyb3JNZXNzYWdlKVxyXG4gICAgICB0b2FzdC5lcnJvcihgRmFpbGVkIHRvIHNhdmUgZHJhZnQ6ICR7ZXJyb3JNZXNzYWdlfWApXHJcbiAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcbiAgfSwgW3VzZXJJZCwgaXNPbmxpbmVdKVxyXG5cclxuICBjb25zdCBkZWxldGVEcmFmdCA9IHVzZUNhbGxiYWNrKGFzeW5jIChpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XHJcbiAgICBpZiAoIWlzT25saW5lKSB7XHJcbiAgICAgIHRvYXN0LmVycm9yKCdDYW5ub3QgZGVsZXRlIGRyYWZ0IC0geW91IGFyZSBvZmZsaW5lJylcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gRGVsZXRpbmcgZHJhZnRcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCBGaXJlYmFzZURyYWZ0U2VydmljZS5kZWxldGVEcmFmdChpZClcclxuICAgICAgXHJcbiAgICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgICAgLy8gRHJhZnQgZGVsZXRlZCBzdWNjZXNzZnVsbHlcclxuICAgICAgICB0b2FzdC5zdWNjZXNzKCdEcmFmdCBkZWxldGVkIHN1Y2Nlc3NmdWxseScpXHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0b2FzdC5lcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBkcmFmdCcpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBkZWxldGUgZHJhZnQnXHJcbiAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSlcclxuICAgICAgdG9hc3QuZXJyb3IoYEZhaWxlZCB0byBkZWxldGUgZHJhZnQ6ICR7ZXJyb3JNZXNzYWdlfWApXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgZHJhZnQ6JywgZXJyKVxyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICB9LCBbaXNPbmxpbmVdKVxyXG5cclxuICBjb25zdCBnZXREcmFmdCA9IHVzZUNhbGxiYWNrKGFzeW5jIChpZDogc3RyaW5nKTogUHJvbWlzZTxGaXJlYmFzZURyYWZ0RGF0YSB8IG51bGw+ID0+IHtcclxuICAgIGlmICghaXNPbmxpbmUpIHtcclxuICAgICAgdG9hc3QuZXJyb3IoJ0Nhbm5vdCBsb2FkIGRyYWZ0IC0geW91IGFyZSBvZmZsaW5lJylcclxuICAgICAgcmV0dXJuIG51bGxcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBMb2FkaW5nIGRyYWZ0XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBkcmFmdCA9IGF3YWl0IEZpcmViYXNlRHJhZnRTZXJ2aWNlLmdldERyYWZ0KGlkKVxyXG4gICAgICBcclxuICAgICAgaWYgKGRyYWZ0KSB7XHJcbiAgICAgICAgLy8gRHJhZnQgbG9hZGVkIHN1Y2Nlc3NmdWxseVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIERyYWZ0IG5vdCBmb3VuZFxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gZHJhZnRcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBsb2FkIGRyYWZ0J1xyXG4gICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpXHJcbiAgICAgIHRvYXN0LmVycm9yKGBGYWlsZWQgdG8gbG9hZCBkcmFmdDogJHtlcnJvck1lc3NhZ2V9YClcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgZHJhZnQ6JywgZXJyKVxyXG4gICAgICByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG4gIH0sIFtpc09ubGluZV0pXHJcblxyXG4gIC8vIEF1dG8tc2F2ZSBmdW5jdGlvbmFsaXR5IHdpdGggZGVib3VuY2VcclxuICBjb25zdCBhdXRvU2F2ZSA9IHVzZUNhbGxiYWNrKChkYXRhOiBQYXJ0aWFsPEZpcmViYXNlRHJhZnREYXRhPiwgaW1hZ2VGaWxlPzogRmlsZSkgPT4ge1xyXG4gICAgaWYgKHNhdmVUaW1lb3V0UmVmLmN1cnJlbnQpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHNhdmVUaW1lb3V0UmVmLmN1cnJlbnQpXHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBBdXRvLXNhdmUgdHJpZ2dlcmVkXHJcbiAgICAgIGF3YWl0IHNhdmVEcmFmdCh7IC4uLmRhdGEsIGF1dG9TYXZlZDogdHJ1ZSB9LCBpbWFnZUZpbGUpXHJcbiAgICB9LCAyMDAwKSAvLyAyIHNlY29uZCBkZWJvdW5jZVxyXG4gIH0sIFtzYXZlRHJhZnRdKVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZHJhZnRzLFxyXG4gICAgaXNMb2FkaW5nLFxyXG4gICAgZXJyb3IsXHJcbiAgICBzYXZlRHJhZnQsXHJcbiAgICBkZWxldGVEcmFmdCxcclxuICAgIGdldERyYWZ0LFxyXG4gICAgcmVmcmVzaERyYWZ0cyxcclxuICAgIHRyYWNraW5nU3RhdHMsXHJcbiAgICBpc09ubGluZSxcclxuICAgIGxhc3RTeW5jVGltZVxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwidXNlUmVmIiwiRmlyZWJhc2VEcmFmdFNlcnZpY2UiLCJ0b2FzdCIsInVzZUZpcmViYXNlRHJhZnRzIiwib3B0aW9ucyIsInVzZXJJZCIsImVuYWJsZVJlYWxUaW1lIiwiZHJhZnRzIiwic2V0RHJhZnRzIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsImlzT25saW5lIiwic2V0SXNPbmxpbmUiLCJuYXZpZ2F0b3IiLCJvbkxpbmUiLCJsYXN0U3luY1RpbWUiLCJzZXRMYXN0U3luY1RpbWUiLCJ0cmFja2luZ1N0YXRzIiwic2V0VHJhY2tpbmdTdGF0cyIsInRvdGFsRHJhZnRzIiwiYXV0b1NhdmVkQ291bnQiLCJtYW51YWxTYXZlZENvdW50IiwiYWlQb3B1bGF0ZWRDb3VudCIsInVuc3Vic2NyaWJlUmVmIiwic2F2ZVRpbWVvdXRSZWYiLCJoYW5kbGVPbmxpbmUiLCJzdWNjZXNzIiwicmVmcmVzaERyYWZ0cyIsImhhbmRsZU9mZmxpbmUiLCJ3YXJuaW5nIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzdGF0cyIsImxlbmd0aCIsImZpbHRlciIsImQiLCJhdXRvU2F2ZWQiLCJhaVBvcHVsYXRlZEZpZWxkcyIsImluaXRpYWxpemVGaXJlYmFzZSIsImNvbm5lY3Rpb25TdWNjZXNzIiwidGVzdENvbm5lY3Rpb24iLCJ1bnN1YnNjcmliZSIsIm9uRHJhZnRzQ2hhbmdlIiwidXBkYXRlZERyYWZ0cyIsIkRhdGUiLCJjdXJyZW50IiwiY2xlYXJUaW1lb3V0IiwiZ2V0QWxsRHJhZnRzIiwiZXJyIiwiZXJyb3JNZXNzYWdlIiwiRXJyb3IiLCJtZXNzYWdlIiwiY29uc29sZSIsInNhdmVEcmFmdCIsImRhdGEiLCJpbWFnZUZpbGUiLCJkcmFmdERhdGEiLCJkcmFmdElkIiwiaXNVcGRhdGUiLCJCb29sZWFuIiwiaWQiLCJkZWxldGVEcmFmdCIsImdldERyYWZ0IiwiZHJhZnQiLCJhdXRvU2F2ZSIsInNldFRpbWVvdXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useFirebaseDrafts.ts\n"));

/***/ })

});