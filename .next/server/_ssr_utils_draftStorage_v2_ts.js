"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_utils_draftStorage_v2_ts";
exports.ids = ["_ssr_utils_draftStorage_v2_ts"];
exports.modules = {

/***/ "(ssr)/./utils/draftStorage.v2.ts":
/*!**********************************!*\
  !*** ./utils/draftStorage.v2.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DraftStorageV2: () => (/* binding */ DraftStorageV2)\n/* harmony export */ });\nclass DraftStorageV2 {\n    static{\n        this.DRAFT_PREFIX = 'single-upload-draft-';\n    }\n    static{\n        this.V2_PREFIX = 'draft-v2-';\n    }\n    static saveDraft(data) {\n        const draftId = data.draftId || this.generateDraftId();\n        const draftData = {\n            draftId,\n            creativeFilename: data.creativeFilename || 'Untitled',\n            lastSaved: new Date().toISOString(),\n            autoSaved: data.autoSaved || false,\n            formData: data.formData || {},\n            imageUrl: data.imageUrl\n        };\n        const key = `${this.V2_PREFIX}${draftId}`;\n        localStorage.setItem(key, JSON.stringify(draftData));\n        return draftId;\n    }\n    static getDraft(draftId) {\n        const key = `${this.V2_PREFIX}${draftId}`;\n        const data = localStorage.getItem(key);\n        if (data) {\n            return JSON.parse(data);\n        }\n        // Check for legacy format\n        const legacyData = this.getLegacyDraft(draftId);\n        if (legacyData) {\n            return legacyData;\n        }\n        return null;\n    }\n    static getAllDrafts() {\n        const drafts = [];\n        // Get V2 drafts\n        for(let i = 0; i < localStorage.length; i++){\n            const key = localStorage.key(i);\n            if (key?.startsWith(this.V2_PREFIX)) {\n                const data = localStorage.getItem(key);\n                if (data) {\n                    try {\n                        drafts.push(JSON.parse(data));\n                    } catch (e) {\n                        console.error('Failed to parse draft:', key, e);\n                    }\n                }\n            }\n        }\n        // Get legacy drafts\n        for(let i = 0; i < localStorage.length; i++){\n            const key = localStorage.key(i);\n            if (key?.startsWith(this.DRAFT_PREFIX) && !key.startsWith(this.V2_PREFIX)) {\n                const legacyDraft = this.getLegacyDraftByKey(key);\n                if (legacyDraft && !drafts.some((d)=>d.creativeFilename === legacyDraft.creativeFilename)) {\n                    drafts.push(legacyDraft);\n                }\n            }\n        }\n        return drafts;\n    }\n    static deleteDraft(draftId) {\n        // Try V2 format first\n        const v2Key = `${this.V2_PREFIX}${draftId}`;\n        if (localStorage.getItem(v2Key)) {\n            localStorage.removeItem(v2Key);\n            return true;\n        }\n        // Try legacy format\n        for(let i = 0; i < localStorage.length; i++){\n            const key = localStorage.key(i);\n            if (key?.startsWith(this.DRAFT_PREFIX)) {\n                const data = localStorage.getItem(key);\n                if (data) {\n                    try {\n                        const parsed = JSON.parse(data);\n                        if (parsed.creativeFilename === draftId || key === `${this.DRAFT_PREFIX}${draftId}`) {\n                            localStorage.removeItem(key);\n                            return true;\n                        }\n                    } catch (e) {\n                        // Try direct match\n                        if (key === `${this.DRAFT_PREFIX}${draftId}`) {\n                            localStorage.removeItem(key);\n                            return true;\n                        }\n                    }\n                }\n            }\n        }\n        return false;\n    }\n    static migrateFromV1() {\n        const migrated = [];\n        for(let i = 0; i < localStorage.length; i++){\n            const key = localStorage.key(i);\n            if (key?.startsWith(this.DRAFT_PREFIX) && !key.startsWith(this.V2_PREFIX)) {\n                const data = localStorage.getItem(key);\n                if (data) {\n                    try {\n                        const parsed = JSON.parse(data);\n                        const filename = key.replace(this.DRAFT_PREFIX, '');\n                        // Create V2 draft\n                        const v2Draft = {\n                            draftId: this.generateDraftId(),\n                            creativeFilename: parsed.creativeFilename || filename,\n                            lastSaved: parsed.savedAt || new Date().toISOString(),\n                            autoSaved: parsed.autoSaved || false,\n                            formData: parsed,\n                            imageUrl: undefined // Legacy format didn't store image URLs\n                        };\n                        // Save as V2\n                        const v2Key = `${this.V2_PREFIX}${v2Draft.draftId}`;\n                        localStorage.setItem(v2Key, JSON.stringify(v2Draft));\n                        migrated.push(key);\n                    } catch (e) {\n                        console.error('Failed to migrate draft:', key, e);\n                    }\n                }\n            }\n        }\n        // Remove migrated legacy drafts\n        migrated.forEach((key)=>{\n            localStorage.removeItem(key);\n        });\n        if (migrated.length > 0) {\n            console.log(`Migrated ${migrated.length} drafts to V2 format`);\n        }\n    }\n    static getLegacyDraft(filename) {\n        const key = `${this.DRAFT_PREFIX}${filename}`;\n        const data = localStorage.getItem(key);\n        if (data) {\n            try {\n                const parsed = JSON.parse(data);\n                return {\n                    draftId: filename,\n                    creativeFilename: parsed.creativeFilename || filename,\n                    lastSaved: parsed.savedAt || new Date().toISOString(),\n                    autoSaved: parsed.autoSaved || false,\n                    formData: parsed,\n                    imageUrl: undefined\n                };\n            } catch (e) {\n                console.error('Failed to parse legacy draft:', key, e);\n            }\n        }\n        return null;\n    }\n    static getLegacyDraftByKey(key) {\n        const data = localStorage.getItem(key);\n        if (data) {\n            try {\n                const parsed = JSON.parse(data);\n                const filename = key.replace(this.DRAFT_PREFIX, '');\n                return {\n                    draftId: filename,\n                    creativeFilename: parsed.creativeFilename || filename,\n                    lastSaved: parsed.savedAt || new Date().toISOString(),\n                    autoSaved: parsed.autoSaved || false,\n                    formData: parsed,\n                    imageUrl: undefined\n                };\n            } catch (e) {\n                console.error('Failed to parse legacy draft:', key, e);\n            }\n        }\n        return null;\n    }\n    static generateDraftId() {\n        return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSTtvQkFDL0JDLFVBQVU0QjtvQkFDVjNCLFVBQVVrQztnQkFDWjtZQUNGLEVBQUUsT0FBT2pCLEdBQUc7Z0JBQ1ZDLFFBQVFDLEtBQUssQ0FBQyxpQ0FBaUNsQixLQUFLZ0I7WUFDdEQ7UUFDRjtRQUNBLE9BQU87SUFDVDtJQUVBLE9BQWVJLG9CQUFvQnBCLEdBQVcsRUFBc0I7UUFDbEUsTUFBTVgsT0FBT1ksYUFBYUssT0FBTyxDQUFDTjtRQUNsQyxJQUFJWCxNQUFNO1lBQ1IsSUFBSTtnQkFDRixNQUFNcUMsU0FBU3ZCLEtBQUtJLEtBQUssQ0FBQ2xCO2dCQUMxQixNQUFNd0MsV0FBVzdCLElBQUk4QixPQUFPLENBQUMsSUFBSSxDQUFDNUMsWUFBWSxFQUFFO2dCQUNoRCxPQUFPO29CQUNMSSxTQUFTdUM7b0JBQ1RwQyxrQkFBa0JpQyxPQUFPakMsZ0JBQWdCLElBQUlvQztvQkFDN0NuQyxXQUFXZ0MsT0FBT00sT0FBTyxJQUFJLElBQUlyQyxPQUFPQyxXQUFXO29CQUNuREMsV0FBVzZCLE9BQU83QixTQUFTLElBQUk7b0JBQy9CQyxVQUFVNEI7b0JBQ1YzQixVQUFVa0M7Z0JBQ1o7WUFDRixFQUFFLE9BQU9qQixHQUFHO2dCQUNWQyxRQUFRQyxLQUFLLENBQUMsaUNBQWlDbEIsS0FBS2dCO1lBQ3REO1FBQ0Y7UUFDQSxPQUFPO0lBQ1Q7SUFFQSxPQUFlekIsa0JBQTBCO1FBQ3ZDLE9BQU8sR0FBR0ksS0FBS3lDLEdBQUcsR0FBRyxDQUFDLEVBQUVDLEtBQUtDLE1BQU0sR0FBR0MsUUFBUSxDQUFDLElBQUlDLE1BQU0sQ0FBQyxHQUFHLElBQUk7SUFDbkU7QUFDRiIsInNvdXJjZXMiOlsiL21udC9kL0lzdGlhbiBGaWxlcy9UaXNlZy9DUlkgQXBwL3V0aWxzL2RyYWZ0U3RvcmFnZS52Mi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIERyYWZ0RGF0YVYyIHtcclxuICBkcmFmdElkOiBzdHJpbmdcclxuICBjcmVhdGl2ZUZpbGVuYW1lOiBzdHJpbmdcclxuICBsYXN0U2F2ZWQ6IHN0cmluZ1xyXG4gIGF1dG9TYXZlZD86IGJvb2xlYW5cclxuICBmb3JtRGF0YTogYW55XHJcbiAgaW1hZ2VVcmw/OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERyYWZ0U3RvcmFnZVYyIHtcclxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBEUkFGVF9QUkVGSVggPSAnc2luZ2xlLXVwbG9hZC1kcmFmdC0nXHJcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgVjJfUFJFRklYID0gJ2RyYWZ0LXYyLSdcclxuICBcclxuICBzdGF0aWMgc2F2ZURyYWZ0KGRhdGE6IFBhcnRpYWw8RHJhZnREYXRhVjI+KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGRyYWZ0SWQgPSBkYXRhLmRyYWZ0SWQgfHwgdGhpcy5nZW5lcmF0ZURyYWZ0SWQoKVxyXG4gICAgY29uc3QgZHJhZnREYXRhOiBEcmFmdERhdGFWMiA9IHtcclxuICAgICAgZHJhZnRJZCxcclxuICAgICAgY3JlYXRpdmVGaWxlbmFtZTogZGF0YS5jcmVhdGl2ZUZpbGVuYW1lIHx8ICdVbnRpdGxlZCcsXHJcbiAgICAgIGxhc3RTYXZlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICBhdXRvU2F2ZWQ6IGRhdGEuYXV0b1NhdmVkIHx8IGZhbHNlLFxyXG4gICAgICBmb3JtRGF0YTogZGF0YS5mb3JtRGF0YSB8fCB7fSxcclxuICAgICAgaW1hZ2VVcmw6IGRhdGEuaW1hZ2VVcmxcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3Qga2V5ID0gYCR7dGhpcy5WMl9QUkVGSVh9JHtkcmFmdElkfWBcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoZHJhZnREYXRhKSlcclxuICAgIHJldHVybiBkcmFmdElkXHJcbiAgfVxyXG4gIFxyXG4gIHN0YXRpYyBnZXREcmFmdChkcmFmdElkOiBzdHJpbmcpOiBEcmFmdERhdGFWMiB8IG51bGwge1xyXG4gICAgY29uc3Qga2V5ID0gYCR7dGhpcy5WMl9QUkVGSVh9JHtkcmFmdElkfWBcclxuICAgIGNvbnN0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpXHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBmb3IgbGVnYWN5IGZvcm1hdFxyXG4gICAgY29uc3QgbGVnYWN5RGF0YSA9IHRoaXMuZ2V0TGVnYWN5RHJhZnQoZHJhZnRJZClcclxuICAgIGlmIChsZWdhY3lEYXRhKSB7XHJcbiAgICAgIHJldHVybiBsZWdhY3lEYXRhXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG4gIFxyXG4gIHN0YXRpYyBnZXRBbGxEcmFmdHMoKTogRHJhZnREYXRhVjJbXSB7XHJcbiAgICBjb25zdCBkcmFmdHM6IERyYWZ0RGF0YVYyW10gPSBbXVxyXG4gICAgXHJcbiAgICAvLyBHZXQgVjIgZHJhZnRzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2FsU3RvcmFnZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBrZXkgPSBsb2NhbFN0b3JhZ2Uua2V5KGkpXHJcbiAgICAgIGlmIChrZXk/LnN0YXJ0c1dpdGgodGhpcy5WMl9QUkVGSVgpKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSlcclxuICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZHJhZnRzLnB1c2goSlNPTi5wYXJzZShkYXRhKSlcclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHBhcnNlIGRyYWZ0OicsIGtleSwgZSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gR2V0IGxlZ2FjeSBkcmFmdHNcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGtleSA9IGxvY2FsU3RvcmFnZS5rZXkoaSlcclxuICAgICAgaWYgKGtleT8uc3RhcnRzV2l0aCh0aGlzLkRSQUZUX1BSRUZJWCkgJiYgIWtleS5zdGFydHNXaXRoKHRoaXMuVjJfUFJFRklYKSkge1xyXG4gICAgICAgIGNvbnN0IGxlZ2FjeURyYWZ0ID0gdGhpcy5nZXRMZWdhY3lEcmFmdEJ5S2V5KGtleSlcclxuICAgICAgICBpZiAobGVnYWN5RHJhZnQgJiYgIWRyYWZ0cy5zb21lKGQgPT4gZC5jcmVhdGl2ZUZpbGVuYW1lID09PSBsZWdhY3lEcmFmdC5jcmVhdGl2ZUZpbGVuYW1lKSkge1xyXG4gICAgICAgICAgZHJhZnRzLnB1c2gobGVnYWN5RHJhZnQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBkcmFmdHNcclxuICB9XHJcbiAgXHJcbiAgc3RhdGljIGRlbGV0ZURyYWZ0KGRyYWZ0SWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgLy8gVHJ5IFYyIGZvcm1hdCBmaXJzdFxyXG4gICAgY29uc3QgdjJLZXkgPSBgJHt0aGlzLlYyX1BSRUZJWH0ke2RyYWZ0SWR9YFxyXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHYyS2V5KSkge1xyXG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh2MktleSlcclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVHJ5IGxlZ2FjeSBmb3JtYXRcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGtleSA9IGxvY2FsU3RvcmFnZS5rZXkoaSlcclxuICAgICAgaWYgKGtleT8uc3RhcnRzV2l0aCh0aGlzLkRSQUZUX1BSRUZJWCkpIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KVxyXG4gICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGRhdGEpXHJcbiAgICAgICAgICAgIGlmIChwYXJzZWQuY3JlYXRpdmVGaWxlbmFtZSA9PT0gZHJhZnRJZCB8fCBrZXkgPT09IGAke3RoaXMuRFJBRlRfUFJFRklYfSR7ZHJhZnRJZH1gKSB7XHJcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KVxyXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gVHJ5IGRpcmVjdCBtYXRjaFxyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSBgJHt0aGlzLkRSQUZUX1BSRUZJWH0ke2RyYWZ0SWR9YCkge1xyXG4gICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSlcclxuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuICBcclxuICBzdGF0aWMgbWlncmF0ZUZyb21WMSgpOiB2b2lkIHtcclxuICAgIGNvbnN0IG1pZ3JhdGVkOiBzdHJpbmdbXSA9IFtdXHJcbiAgICBcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGtleSA9IGxvY2FsU3RvcmFnZS5rZXkoaSlcclxuICAgICAgaWYgKGtleT8uc3RhcnRzV2l0aCh0aGlzLkRSQUZUX1BSRUZJWCkgJiYgIWtleS5zdGFydHNXaXRoKHRoaXMuVjJfUFJFRklYKSkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpXHJcbiAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoZGF0YSlcclxuICAgICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBrZXkucmVwbGFjZSh0aGlzLkRSQUZUX1BSRUZJWCwgJycpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgVjIgZHJhZnRcclxuICAgICAgICAgICAgY29uc3QgdjJEcmFmdDogRHJhZnREYXRhVjIgPSB7XHJcbiAgICAgICAgICAgICAgZHJhZnRJZDogdGhpcy5nZW5lcmF0ZURyYWZ0SWQoKSxcclxuICAgICAgICAgICAgICBjcmVhdGl2ZUZpbGVuYW1lOiBwYXJzZWQuY3JlYXRpdmVGaWxlbmFtZSB8fCBmaWxlbmFtZSxcclxuICAgICAgICAgICAgICBsYXN0U2F2ZWQ6IHBhcnNlZC5zYXZlZEF0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICBhdXRvU2F2ZWQ6IHBhcnNlZC5hdXRvU2F2ZWQgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgZm9ybURhdGE6IHBhcnNlZCxcclxuICAgICAgICAgICAgICBpbWFnZVVybDogdW5kZWZpbmVkIC8vIExlZ2FjeSBmb3JtYXQgZGlkbid0IHN0b3JlIGltYWdlIFVSTHNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2F2ZSBhcyBWMlxyXG4gICAgICAgICAgICBjb25zdCB2MktleSA9IGAke3RoaXMuVjJfUFJFRklYfSR7djJEcmFmdC5kcmFmdElkfWBcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odjJLZXksIEpTT04uc3RyaW5naWZ5KHYyRHJhZnQpKVxyXG4gICAgICAgICAgICBtaWdyYXRlZC5wdXNoKGtleSlcclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIG1pZ3JhdGUgZHJhZnQ6Jywga2V5LCBlKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBSZW1vdmUgbWlncmF0ZWQgbGVnYWN5IGRyYWZ0c1xyXG4gICAgbWlncmF0ZWQuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICBpZiAobWlncmF0ZWQubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhgTWlncmF0ZWQgJHttaWdyYXRlZC5sZW5ndGh9IGRyYWZ0cyB0byBWMiBmb3JtYXRgKVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBwcml2YXRlIHN0YXRpYyBnZXRMZWdhY3lEcmFmdChmaWxlbmFtZTogc3RyaW5nKTogRHJhZnREYXRhVjIgfCBudWxsIHtcclxuICAgIGNvbnN0IGtleSA9IGAke3RoaXMuRFJBRlRfUFJFRklYfSR7ZmlsZW5hbWV9YFxyXG4gICAgY29uc3QgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSlcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShkYXRhKVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBkcmFmdElkOiBmaWxlbmFtZSxcclxuICAgICAgICAgIGNyZWF0aXZlRmlsZW5hbWU6IHBhcnNlZC5jcmVhdGl2ZUZpbGVuYW1lIHx8IGZpbGVuYW1lLFxyXG4gICAgICAgICAgbGFzdFNhdmVkOiBwYXJzZWQuc2F2ZWRBdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICBhdXRvU2F2ZWQ6IHBhcnNlZC5hdXRvU2F2ZWQgfHwgZmFsc2UsXHJcbiAgICAgICAgICBmb3JtRGF0YTogcGFyc2VkLFxyXG4gICAgICAgICAgaW1hZ2VVcmw6IHVuZGVmaW5lZFxyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBsZWdhY3kgZHJhZnQ6Jywga2V5LCBlKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuICBcclxuICBwcml2YXRlIHN0YXRpYyBnZXRMZWdhY3lEcmFmdEJ5S2V5KGtleTogc3RyaW5nKTogRHJhZnREYXRhVjIgfCBudWxsIHtcclxuICAgIGNvbnN0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpXHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoZGF0YSlcclxuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGtleS5yZXBsYWNlKHRoaXMuRFJBRlRfUFJFRklYLCAnJylcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgZHJhZnRJZDogZmlsZW5hbWUsXHJcbiAgICAgICAgICBjcmVhdGl2ZUZpbGVuYW1lOiBwYXJzZWQuY3JlYXRpdmVGaWxlbmFtZSB8fCBmaWxlbmFtZSxcclxuICAgICAgICAgIGxhc3RTYXZlZDogcGFyc2VkLnNhdmVkQXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgYXV0b1NhdmVkOiBwYXJzZWQuYXV0b1NhdmVkIHx8IGZhbHNlLFxyXG4gICAgICAgICAgZm9ybURhdGE6IHBhcnNlZCxcclxuICAgICAgICAgIGltYWdlVXJsOiB1bmRlZmluZWRcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgbGVnYWN5IGRyYWZ0OicsIGtleSwgZSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZ2VuZXJhdGVEcmFmdElkKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYCR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YFxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJEcmFmdFN0b3JhZ2VWMiIsIkRSQUZUX1BSRUZJWCIsIlYyX1BSRUZJWCIsInNhdmVEcmFmdCIsImRhdGEiLCJkcmFmdElkIiwiZ2VuZXJhdGVEcmFmdElkIiwiZHJhZnREYXRhIiwiY3JlYXRpdmVGaWxlbmFtZSIsImxhc3RTYXZlZCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImF1dG9TYXZlZCIsImZvcm1EYXRhIiwiaW1hZ2VVcmwiLCJrZXkiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldERyYWZ0IiwiZ2V0SXRlbSIsInBhcnNlIiwibGVnYWN5RGF0YSIsImdldExlZ2FjeURyYWZ0IiwiZ2V0QWxsRHJhZnRzIiwiZHJhZnRzIiwiaSIsImxlbmd0aCIsInN0YXJ0c1dpdGgiLCJwdXNoIiwiZSIsImNvbnNvbGUiLCJlcnJvciIsImxlZ2FjeURyYWZ0IiwiZ2V0TGVnYWN5RHJhZnRCeUtleSIsInNvbWUiLCJkIiwiZGVsZXRlRHJhZnQiLCJ2MktleSIsInJlbW92ZUl0ZW0iLCJwYXJzZWQiLCJtaWdyYXRlRnJvbVYxIiwibWlncmF0ZWQiLCJmaWxlbmFtZSIsInJlcGxhY2UiLCJ2MkRyYWZ0Iiwic2F2ZWRBdCIsInVuZGVmaW5lZCIsImZvckVhY2giLCJsb2ciLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./utils/draftStorage.v2.ts\n");

/***/ })

};
;